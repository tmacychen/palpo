# Palpo Admin UI æµ‹è¯•æ‰§è¡ŒæŒ‡å—

## ç¯å¢ƒçŠ¶æ€æ£€æŸ¥

### âœ… å·²è¿è¡Œçš„æœåŠ¡
- **Palpo Server**: æ­£åœ¨è¿è¡Œ (PID: 20527) - http://localhost:8008
- **PostgreSQL**: æ­£åœ¨è¿è¡Œï¼Œç”¨æˆ·: palpo
- **Trunk**: éœ€è¦å¯åŠ¨

### ğŸ“‹ éœ€è¦æ‰‹åŠ¨å¯åŠ¨
- **UI Dev Server**: éœ€è¦åœ¨æ–°ç»ˆç«¯å¯åŠ¨

---

## å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### ç»ˆç«¯ 1: Palpo Server (å·²è¿è¡Œ)
```bash
# æ£€æŸ¥çŠ¶æ€
cd /Users/tmacy/palpo
ps aux | grep palpo
```

### ç»ˆç«¯ 2: UI å¼€å‘æœåŠ¡å™¨
```bash
cd /Users/tmacy/palpo/crates/ui
trunk serve --port 8080
```

### ç»ˆç«¯ 3: æµ‹è¯•æ‰§è¡Œ (è‡ªåŠ¨åŒ–æµ‹è¯•)
```bash
cd /Users/tmacy/palpo/crates/ui
cargo test --lib
```

---

## æ‰‹åŠ¨æµ‹è¯•æ¸…å•

### P0: è®¤è¯ç³»ç»Ÿ (æœ€é«˜ä¼˜å…ˆçº§)

#### 1.1 ç™»å½•é¡µé¢æµ‹è¯•
- [ ] è®¿é—® http://localhost:8080
- [ ] éªŒè¯é¡µé¢åŠ è½½ï¼Œæ˜¾ç¤ºç™»å½•è¡¨å•
- [ ] æ£€æŸ¥è¡¨å•å­—æ®µï¼šæœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç 
- [ ] æµ‹è¯•æœåŠ¡å™¨åœ°å€é»˜è®¤å€¼æ˜¯å¦ä¸º http://localhost:8008
- [ ] è¾“å…¥é”™è¯¯çš„æœåŠ¡å™¨åœ°å€ï¼ŒéªŒè¯é”™è¯¯æç¤º
- [ ] è¾“å…¥é”™è¯¯çš„ç”¨æˆ·å/å¯†ç ï¼ŒéªŒè¯é”™è¯¯æç¤º
- [ ] è¾“å…¥æ­£ç¡®çš„ç®¡ç†å‘˜å‡­è¯ï¼š
  - æœåŠ¡å™¨: http://localhost:8008
  - ç”¨æˆ·å: `@admin:localhost:8008`
  - å¯†ç : `admin`
- [ ] éªŒè¯æˆåŠŸç™»å½•åè·³è½¬åˆ° Dashboard

#### 1.2 Token ç®¡ç†æµ‹è¯•
- [ ] ç™»å½•åæ£€æŸ¥ localStorage æ˜¯å¦ä¿å­˜äº† token
- [ ] åˆ·æ–°é¡µé¢ï¼ŒéªŒè¯æ˜¯å¦ä¿æŒç™»å½•çŠ¶æ€
- [ ] ç‚¹å‡»ç™»å‡ºæŒ‰é’®ï¼ŒéªŒè¯æ˜¯å¦æ¸…é™¤ token å¹¶è¿”å›ç™»å½•é¡µ

### P0: Dashboard é¡µé¢

#### 2.1 é¡µé¢å¸ƒå±€æµ‹è¯•
- [ ] éªŒè¯é¡µé¢æ ‡é¢˜æ˜¯å¦ä¸º "Palpo Admin Dashboard"
- [ ] æ£€æŸ¥ä¾§è¾¹æ å¯¼èˆªèœå•ï¼š
  - [ ] Dashboard (active)
  - [ ] User Management
  - [ ] Room Management
  - [ ] Federation Management
- [ ] éªŒè¯é¡¶éƒ¨å¯¼èˆªæ æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰ç™»å‡ºæŒ‰é’®

#### 2.2 ç»Ÿè®¡å¡ç‰‡æµ‹è¯•
- [ ] éªŒè¯æ˜¾ç¤ºä»¥ä¸‹ç»Ÿè®¡å¡ç‰‡ï¼š
  - [ ] Total Users
  - [ ] Active Users
  - [ ] Total Rooms
  - [ ] Active Rooms
  - [ ] Federation Servers
- [ ] éªŒè¯å¡ç‰‡æ•°æ®æ˜¾ç¤ºæ­£ç¡®

#### 2.3 æ•°æ®å±•ç¤ºæµ‹è¯•
- [ ] éªŒè¯ç”¨æˆ·æ´»åŠ¨å›¾è¡¨æ˜¾ç¤º
- [ ] éªŒè¯æˆ¿é—´æ´»åŠ¨å›¾è¡¨æ˜¾ç¤º
- [ ] éªŒè¯æœåŠ¡å™¨ä¿¡æ¯åŒºåŸŸæ˜¾ç¤ºï¼š
  - [ ] Server Version
  - [ ] Uptime
  - [ ] Database Size

### P1: ç”¨æˆ·ç®¡ç†

#### 3.1 ç”¨æˆ·åˆ—è¡¨æµ‹è¯•
- [ ] ç‚¹å‡»ä¾§è¾¹æ  "User Management"
- [ ] éªŒè¯è·³è½¬åˆ° /users é¡µé¢
- [ ] æ£€æŸ¥ç”¨æˆ·åˆ—è¡¨æ˜¯å¦æ˜¾ç¤º
- [ ] éªŒè¯åˆ—è¡¨åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
  - [ ] User ID
  - [ ] Display Name
  - [ ] Avatar
  - [ ] Admin Status
  - [ ] Deactivated Status
- [ ] æµ‹è¯•æœç´¢åŠŸèƒ½ï¼š
  - [ ] æŒ‰ç”¨æˆ·åæœç´¢
  - [ ] æŒ‰æ˜¾ç¤ºåæœç´¢
- [ ] æµ‹è¯•ç­›é€‰åŠŸèƒ½ï¼š
  - [ ] ç­›é€‰ç®¡ç†å‘˜
  - [ ] ç­›é€‰å·²åœç”¨ç”¨æˆ·
  - [ ] ç­›é€‰è®¿å®¢ç”¨æˆ·

#### 3.2 ç”¨æˆ·è¯¦æƒ…æµ‹è¯•
- [ ] ç‚¹å‡»ç”¨æˆ·åˆ—è¡¨ä¸­çš„ç”¨æˆ·
- [ ] éªŒè¯æ‰“å¼€ç”¨æˆ·è¯¦æƒ…é¡µé¢
- [ ] æ£€æŸ¥æ˜¾ç¤ºå®Œæ•´ç”¨æˆ·ä¿¡æ¯
- [ ] æµ‹è¯• "Deactivate User" æŒ‰é’®
- [ ] æµ‹è¯• "Toggle Admin" æŒ‰é’®

### P1: æˆ¿é—´ç®¡ç†

#### 4.1 æˆ¿é—´åˆ—è¡¨æµ‹è¯•
- [ ] ç‚¹å‡»ä¾§è¾¹æ  "Room Management"
- [ ] éªŒè¯è·³è½¬åˆ° /rooms é¡µé¢
- [ ] æ£€æŸ¥æˆ¿é—´åˆ—è¡¨æ˜¯å¦æ˜¾ç¤º
- [ ] éªŒè¯æˆ¿é—´ä¿¡æ¯ï¼š
  - [ ] Room ID
  - [ ] Room Name
  - [ ] Member Count
  - [ ] Creator
- [ ] æµ‹è¯•æœç´¢æˆ¿é—´åŠŸèƒ½

### P2: è”é‚¦ç®¡ç†

#### 5.1 è”é‚¦æœåŠ¡å™¨åˆ—è¡¨
- [ ] ç‚¹å‡»ä¾§è¾¹æ  "Federation Management"
- [ ] éªŒè¯è·³è½¬åˆ° /federation é¡µé¢
- [ ] æ£€æŸ¥è”é‚¦æœåŠ¡å™¨åˆ—è¡¨
- [ ] éªŒè¯æ˜¾ç¤ºè¿æ¥çŠ¶æ€

### P3: é€šç”¨åŠŸèƒ½æµ‹è¯•

#### 6.1 å“åº”å¼è®¾è®¡
- [ ] è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°
- [ ] éªŒè¯åœ¨ç§»åŠ¨è®¾å¤‡è§†å›¾ä¸‹å¸ƒå±€æ­£å¸¸
- [ ] æ£€æŸ¥ä¾§è¾¹æ æ˜¯å¦æŠ˜å /å±•å¼€æ­£å¸¸

#### 6.2 é”™è¯¯å¤„ç†
- [ ] æ–­å¼€ Palpo æœåŠ¡å™¨è¿æ¥
- [ ] éªŒè¯ UI æ˜¾ç¤ºé”™è¯¯æç¤º
- [ ] æ¢å¤è¿æ¥åéªŒè¯åŠŸèƒ½æ­£å¸¸

#### 6.3 åŠ è½½çŠ¶æ€
- [ ] æµ‹è¯•æ‰€æœ‰é¡µé¢çš„åŠ è½½çŠ¶æ€
- [ ] éªŒè¯åŠ è½½åŠ¨ç”»/æç¤ºæ˜¾ç¤º

---

## è‡ªåŠ¨åŒ–æµ‹è¯•æ¸…å•

### å•å…ƒæµ‹è¯•
```bash
cd /Users/tmacy/palpo/crates/ui
cargo test --lib
```

**æµ‹è¯•æ–‡ä»¶**ï¼š
- `src/services/api.rs` - API å®¢æˆ·ç«¯æµ‹è¯•
- `src/services/auth.rs` - è®¤è¯æœåŠ¡æµ‹è¯•
- `src/state/auth.rs` - è®¤è¯çŠ¶æ€ç®¡ç†æµ‹è¯•

### WASM ç»‘å®šæµ‹è¯•
```bash
cargo test --target wasm32-unknown-unknown
```

---

## æµ‹è¯•æ•°æ®å‡†å¤‡

### åˆ›å»ºæµ‹è¯•ç”¨æˆ·
ä½¿ç”¨ Palpo API åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼š

```bash
# åˆ›å»ºæ™®é€šç”¨æˆ·
curl -XPOST -d '{"type":"m.login.password","identifier":{"type":"m.id.user","user":"@testuser1:localhost:8008"},"password":"testpass123"}' http://localhost:8008/_matrix/client/v3/register

# åˆ›å»ºç®¡ç†å‘˜ï¼ˆé€šè¿‡ admin APIï¼‰
curl -XPOST -H "Authorization: Bearer YOUR_ADMIN_TOKEN" -d '{"username":"testadmin","password":"admin123","admin":true}' http://localhost:8008/_synapse/admin/v1/register
```

### åˆ›å»ºæµ‹è¯•æˆ¿é—´
```bash
# é€šè¿‡ Matrix å®¢æˆ·ç«¯åˆ›å»ºæµ‹è¯•æˆ¿é—´
# æˆ–ä½¿ç”¨ admin API
```

---

## é¢„æœŸç»“æœ

### âœ… æˆåŠŸæ ‡å‡†
- æ‰€æœ‰ P0 æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- 90% ä»¥ä¸Šçš„ P1 æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- æ— ä¸¥é‡ UI é”™è¯¯
- API å“åº”æ—¶é—´ < 1s
- é¡µé¢åŠ è½½æ—¶é—´ < 2s

### âŒ å¤±è´¥æ ‡å‡†
- ä»»ä½• P0 æµ‹è¯•ç”¨ä¾‹å¤±è´¥
- ä¸¥é‡çš„ UI å¸ƒå±€é”™è¯¯
- API æ— æ³•è¿æ¥æˆ–æŒç»­å¤±è´¥
- é¡µé¢å´©æºƒæˆ–ç™½å±

---

## é—®é¢˜æŠ¥å‘Š

å‘ç°é—®é¢˜æ—¶ï¼Œè¯·è®°å½•ï¼š
1. é—®é¢˜æè¿°
2. å¤ç°æ­¥éª¤
3. æœŸæœ›è¡Œä¸º
4. å®é™…è¡Œä¸º
5. æˆªå›¾/å½•å±
6. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
7. ç½‘ç»œè¯·æ±‚è¯¦æƒ…

---

## æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ P0 æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå®Œæ¯•
- [ ] æ‰€æœ‰ P1 æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå®Œæ¯•
- [ ] æ‰€æœ‰å‘ç°çš„ Bug å·²è®°å½•
- [ ] æµ‹è¯•æŠ¥å‘Šå·²ç”Ÿæˆ
- [ ] ä»£ç è¦†ç›–ç‡æŠ¥å‘Šå·²ç”Ÿæˆï¼ˆå¦‚é€‚ç”¨ï¼‰
